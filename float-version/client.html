<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Rosea — Клієнт (Float)</title>
  <link rel="stylesheet" href="styles-float.css">
</head>
<body>
  <div class="wrap">
    <div class="board">

      <header class="b1" role="banner">
        <h2>Rosea Client </h2>
      </header>

      <aside class="b2" role="complementary">
        <h3>Клієнтська зона</h3>
        <p>Дивіться у правий нижній кут.</p>
        <p>Це версія верстки на Float.</p>
      </aside>

      <aside class="b4" role="complementary">
        <nav role="navigation">
          <ul>
            <li><a href="index-float.html">Головна</a></li>
            <li><a href="page2-float.html">Каталог</a></li>
            <li><a href="page3-float.html">Про нас</a></li>
            <li><a href="page4-float.html">Галерея</a></li>
            <li><a href="page5-float.html">Контакти</a></li>
            <li><a href="admin.html">Адмінка</a></li>
            <li><a class="active" href="client.html">Клієнт (View)</a></li>
          </ul>
        </nav>
      </aside>

      <div class="b6" role="note">
        Не закривайте вкладку для отримання оновлень.
      </div>

      <main class="b5" role="main">
        <div class="love-block">
          <h1>Сторінка Клієнта</h1>
        </div>
        <div class="gallery-block">
          <p>Ця сторінка автоматично опитує сервер.</p>
          <div style="width:100%; height:200px; background:#EFD8D6; border-radius:10px; display:flex; align-items:center; justify-content:center; color:#422B23;">
              Контент Float версії...
          </div>
        </div>
      </main>

      <footer class="b7" role="contentinfo">
        <h2>Rosea</h2>
        <h3>Квіти, що говорять замість слів ✨</h3>
      </footer>

      <div id="toast-container"></div>

    </div>
  </div>

  <script>
      let lastDataJson = ""; 

      function createToast(data) {
          const toast = document.createElement('div');
          toast.className = 'rosea-toast';

          const header = document.createElement('div');
          header.className = 'toast-header';
          const title = document.createElement('strong');
          title.textContent = data.title;
          const time = document.createElement('span');
          time.textContent = data.time;
          const btn = document.createElement('button');
          btn.className = 'toast-close';
          btn.innerHTML = '&times;';
          btn.onclick = () => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 500); };

          header.append(title, time, btn);
          const body = document.createElement('div');
          body.className = 'toast-body';
          body.textContent = data.body;

          toast.append(header, body);
          return toast;
      }

      function fetchUpdates() {
          fetch('server.php')
              .then(res => res.json())
              .then(data => {
                  const currentJson = JSON.stringify(data);
                  if (currentJson !== lastDataJson && Array.isArray(data)) {
                      lastDataJson = currentJson;
                      const container = document.getElementById('toast-container');
                      container.innerHTML = ''; 
                      data.forEach(item => container.appendChild(createToast(item)));
                  }
              })
              .catch(err => console.error(err));
      }

      setInterval(fetchUpdates, 3000);
      fetchUpdates();
  </script>
</body>
</html>